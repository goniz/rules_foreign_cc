--- a/lib/glob.c
+++ b/lib/glob.c
@@ -136,7 +136,7 @@ my_realloc (p, n)
 #endif /* __GNU_LIBRARY__ || __DJGPP__ */


-#if !defined __alloca && !defined __GNU_LIBRARY__
+#if (!defined __alloca && defined __GNU_LIBRARY__ && __linux__) || (!defined __alloca && !defined __GNU_LIBRARY__)

 # ifdef        __GNUC__
 #  undef alloca
